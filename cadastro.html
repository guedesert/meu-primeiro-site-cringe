<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cadastro</title>
    <link rel="icon" type="image/x-icon" href="./assets/logo.svg" />
    <!-- Fontes -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Montez&display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Condensed&display=swap" rel="stylesheet" />
    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous" />
    <link rel="stylesheet" href="formatos.css" />
  </head>
  <body>
    <header>
      <nav class="navbar fixed-top navbar-expand-sm navbar-light bg-light">
        <div class="navbar-nav">
          <a class="nav-link" href="./home.html">Home</a>
          <a class="nav-link" href="./receitas.html">Receitas</a>
          <a class="nav-link active" aria-current="page" href="./cadastro.html">Cadastro</a>
      </nav>
    </header>
    <main id="cadastro">
      <form id="formCadastro" class="container-fluid" method="get" action="mailto:202212181407@alunos.estacio.br" target="_blank">
        <h1>Cadastre-se</h1>
        <div class="form-group row justify-content-center">
          <input type="hidden" name="subject" value="Cadastro - Receitas do Guedes"/>
          <input type="hidden" name="body" value="" />
          <label for="nome" class="col-1 col-form-label">Nome:</label>
          <input type="text" name="nome " id="nome" class="col-5 form-control" autofocus required />
        </div>
        <div class="form-group row justify-content-center">
          <label for="email" class="col-1 col-form-label">E-mail:</label>
          <input type="email" name="email" id="email" class="col-5 form-control" required />
        </div>
        <div class="form-group row justify-content-center">
          <label for="cep" class="col-1 col-form-label">CEP:</label>
          <input type="text"name="cep" id="cep" class="col-2 form-control" size="10" required onblur="pesquisacep(this.value)" />
          &nbsp;
          <a class="col-1 btn btn-secondary form-control" href="https://buscacepinter.correios.com.br/app/endereco/index.php?t" target="_blank">
            Buscar CEP
          </a>
          <div class="col-2"></div>
        </div>
        <div class="form-group row justify-content-center">
          <label for="rua" class="col-1 col-form-label">Rua:</label>
          <input type="text" name="rua" id="rua" class="col-3 form-control" required />
          <label for="numero" class="col-1 col-form-label">N.º:</label>
          <input type="number" name="numero" id="numero" class="col-1 form-control" required />
        </div>
        <div class="form-group row justify-content-center">
          <label for="complemento" class="col-1 col-form-label">Complemento:</label>
          <input type="text" name="complemento" id="complemento" class="col-2 form-control" required />
          <label for="bairro" class="col-1 col-form-label">Bairro:</label>
          <input type="text" name="bairro" id="bairro" class="col-2 form-control" required />
        </div>
        <div class="form-group row justify-content-center">
          <label for="cidade" class="col-1 col-form-label">Cidade:</label>
          <input type="text" name="cidade" id="cidade" class="col-3 form-control" required />
          <label for="uf" class="col-1 col-form-label">UF:</label>
          <select class="col-1 custom-select" name="uf" id="uf" required>
            <option value="AC">AC</option>
            <option value="AL">AL</option>
            <option value="AP">AP</option>
            <option value="AM">AM</option>
            <option value="BA">BA</option>
            <option value="CE">CE</option>
            <option value="DF">DF</option>
            <option value="ES">ES</option>
            <option value="GO">GO</option>
            <option value="MA">MA</option>
            <option value="MT">MT</option>
            <option value="MS">MS</option>
            <option value="MG">MG</option>
            <option value="PA">PA</option>
            <option value="PB">PB</option>
            <option value="PR">PR</option>
            <option value="PE">PE</option>
            <option value="PI">PI</option>
            <option value="RJ">RJ</option>
            <option value="RN">RN</option>
            <option value="RS">RS</option>
            <option value="RO">RO</option>
            <option value="RR">RR</option>
            <option value="SC">SC</option>
            <option value="SP">SP</option>
            <option value="SE">SE</option>
            <option value="TO">TO</option>
          </select>
        </div>
        <div class="form-group row justify-content-center">
          <div class="col-4"></div>
          <button type="reset" class="col-1 btn btn-danger form-control">Limpar</button>
          &nbsp;
          <button type="submit" class="col-1 btn btn-success form-control">Cadastrar</button>
        </div>
      </form>
    </main>
    <footer>
      &copy; 2023. Desenvolvido por&nbsp;<a href="https://github.com/guedesert">Emanuel Guedes</a>.
    </footer>
    <!-- Bootstrap -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
    <!-- JavaScript para preenchimento automático de dados a partir do CEP e carregar os dados do formulário para o e-mail -->
    <script>
      function limpa_formulario_cep() {
        //Limpa valores do formulário de cep.
        document.getElementById("rua").value = ""
        document.getElementById("cidade").value = ""
        document.getElementById("bairro").value = ""
        document.getElementById("uf").value = ""
      }
      function meu_callback(conteudo) {
        if (!("erro" in conteudo)) {
          //Atualiza os campos com os valores.
          document.getElementById("rua").value = conteudo.logradouro
          document.getElementById("bairro").value = conteudo.bairro
          document.getElementById("cidade").value = conteudo.localidade
          document.getElementById("uf").value = conteudo.uf
        } else {
          //CEP não Encontrado.
          limpa_formulario_cep()
          alert("CEP não encontrado.")
        }
      }
      function pesquisacep(valor) {
        //Nova variável CEP somente com dígitos.
        var cep = valor.replace(/\D/g, "")
        //Verifica se o campo CEP possui valor informado.
        if (cep != "") {
          //Expressão regular para validar o CEP.
          var validacep = /^[0-9]{8}$/
          //Valida o formato do CEP.
          if (validacep.test(cep)) {
            //Preenche os campos com "..." enquanto consulta webservice.
            document.getElementById("rua").value = "..."
            document.getElementById("bairro").value = "..."
            document.getElementById("cidade").value = "..."
            document.getElementById("uf").value = "..."
            //Cria um elemento JavaScript.
            var script = document.createElement("script")
            //Sincroniza com o callback.
            script.src = "https://viacep.com.br/ws/" + cep + "/json/?callback=meu_callback"
            //Insere script no documento e carrega o conteúdo.
            document.body.appendChild(script)
          } else {
            //CEP é inválido.
            limpa_formulario_cep()
            alert("O CEP informado é inválido.")
          }
        } else {
          //CEP sem valor, limpa formulário.
          limpa_formulario_cep()
        }
      }
      //Transfere os dados do formulário de cadastro
      var formulario = document.getElementById("formCadastro")
      formulario.addEventListener("submit", function () {
          var nome = this.querySelector("#nome"),
            nome = nome.value
          var email = this.querySelector("#email"),
            email = email.value
          var cep = this.querySelector("#cep"),
            cep = cep.value
          var rua = this.querySelector("#rua"),
            rua = rua.value
          var numero = this.querySelector("#numero"),
            numero = numero.value
          var complemento = this.querySelector("#complemento"),
            complemento = complemento.value
          var bairro = this.querySelector("#bairro"),
            bairro = bairro.value
          var cidade = this.querySelector("#cidade"),
            cidade = cidade.value
          var uf = this.querySelector("#uf"),
            uf = uf.value
          var texto = "Cadastro realizado no site\nNome: " + nome + "\nE-mail: " + email + "\nCEP: " + cep + "\nRua: " + rua + "\nN.º: " + numero + "\nComplemento: " + complemento + "\nBairro: " + bairro + "\nCidade: " + cidade + "\nUF: " + uf
          this.querySelector("input[name=body]").setAttribute("value", texto)
        })
    </script>
  </body>
</html>